<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	username: <input type="text" id="user"><br>
	password: <input type="password" id="pass"><br>
	<input type="button" value="register" id="reg_btn">
	<input type="button" value="login" id="login_btn">

	<script src="./ajax.js"></script>
	<script type="text/javascript">
		
	let oTxtUser = document.getElementById(`user`);
	let oTxtPass = document.getElementById(`pass`);
	let oBtnReg = document.getElementById(`reg_btn`);
	let oBtnLogin = document.getElementById(`login_btn`);


	oBtnReg.onclick = function() {

		ajax({
			url: `/user`, 
			data: {act: `reg`, user: oTxtUser.value, pass: oTxtPass.value}, 
			type: `get`, 
			success: function (str) {
				let json = eval('('+str+')');

				if (json.ok) {
					alert(`reg done: ${json.msg}`);
				} else {
					alert(`reg wrong: ${json.msg}`);
				}
			}, 
			error: function() {
				alert(`comm wrong`);
			}
		});
	};

	oBtnLogin.onclick=function (){
          ajax({
            url: '/user',
            data: {act: 'login', user: oTxtUser.value, pass: oTxtPass.value},
            type: 'get',
            success: function (str){
              var json=eval('('+str+')');

              if(json.ok){
                alert('login done: ${json.msg}');
              }else{
                alert('login wrong: '+json.msg);
              }
            },
            error: function (){
              alert('comm wrong');
            }
          });
        };

	</script>
</body>
</html>




























